<?xml version="1.0" encoding="utf-8"?>
<feed xmlns="http://www.w3.org/2005/Atom">

 <title>Tiny Factory Docs</title>
 <link href="http://http://tinyfactory.github.com/atom.xml" rel="self"/>
 <link href="http://http://tinyfactory.github.com/"/>
 <updated>2012-07-25T17:32:33-07:00</updated>
 <id>http://http://tinyfactory.github.com/</id>
 <author>
   <name>Tiny Factory</name>
   <email>hello@tinyfactory.co</email>
 </author>

 
 <entry>
   <title>Create New Ec2 For Node</title>
   <link href="http://http://tinyfactory.github.com/node.js/2012/07/18/create-new-ec2-for-node.html"/>
   <updated>2012-07-18T00:00:00-07:00</updated>
   <id>http://http://tinyfactory.github.com/node.js/2012/07/18/create-new-ec2-for-node</id>
   <content type="html">&lt;h2 id='create_the_ec2_instance'&gt;Create the EC2 Instance&lt;/h2&gt;

&lt;ol&gt;
&lt;li&gt;
&lt;p&gt;Login to &lt;a href='http://aws.amazon.com/'&gt;aws.amazon.com&lt;/a&gt;&lt;/p&gt;
&lt;/li&gt;

&lt;li&gt;
&lt;p&gt;Pulldown &lt;strong&gt;My Account/Console&lt;/strong&gt; and select &lt;strong&gt;AWS Management Console&lt;/strong&gt;&lt;/p&gt;
&lt;/li&gt;

&lt;li&gt;
&lt;p&gt;Select &lt;strong&gt;EC2&lt;/strong&gt; under &lt;strong&gt;Compute and Networking&lt;/strong&gt;&lt;/p&gt;
&lt;/li&gt;

&lt;li&gt;
&lt;p&gt;Click the &lt;strong&gt;Launch Instance&lt;/strong&gt; button&lt;/p&gt;
&lt;/li&gt;

&lt;li&gt;
&lt;p&gt;Select the Classic Interface&lt;/p&gt;
&lt;/li&gt;

&lt;li&gt;
&lt;p&gt;Select &lt;strong&gt;64 bit Amazon Linux AMI&lt;/strong&gt;&lt;/p&gt;
&lt;/li&gt;

&lt;li&gt;
&lt;p&gt;Select &lt;strong&gt;Micro&lt;/strong&gt; (unless for high traffic site)&lt;/p&gt;
&lt;/li&gt;

&lt;li&gt;
&lt;p&gt;Set zone to &lt;strong&gt;us-east-1a&lt;/strong&gt; (or make a note if selecting another zone)&lt;/p&gt;
&lt;/li&gt;

&lt;li&gt;
&lt;p&gt;Give the instance a name&lt;/p&gt;
&lt;/li&gt;

&lt;li&gt;
&lt;p&gt;Download the ssh key&lt;/p&gt;
&lt;/li&gt;

&lt;li&gt;
&lt;p&gt;Move key to local .ssh directory&lt;/p&gt;
&lt;/li&gt;

&lt;li&gt;
&lt;p&gt;Change permissions on key to 600 in Terminal with: &lt;code&gt;chmod 600 ~/.ssh/[filename].pem&lt;/code&gt;&lt;/p&gt;
&lt;/li&gt;

&lt;li&gt;
&lt;p&gt;Under the ports open the following:&lt;/p&gt;

&lt;ul&gt;
&lt;li&gt;Port 22 for ssh&lt;/li&gt;

&lt;li&gt;Port 80 for live&lt;/li&gt;

&lt;li&gt;Port 81 for live socket&lt;/li&gt;

&lt;li&gt;Port 8080 for dev&lt;/li&gt;

&lt;li&gt;Port 8081 for dev socket&lt;/li&gt;

&lt;li&gt;Port 8090 for stage&lt;/li&gt;

&lt;li&gt;Port 8091 for stage socket&lt;/li&gt;

&lt;li&gt;Port 31337 for Twilio (If using)&lt;/li&gt;
&lt;/ul&gt;
&lt;/li&gt;

&lt;li&gt;
&lt;p&gt;Launch the instance&lt;/p&gt;
&lt;/li&gt;
&lt;/ol&gt;

&lt;h2 id='give_it_an_ip'&gt;Give it an IP&lt;/h2&gt;

&lt;ol&gt;
&lt;li&gt;Under &lt;strong&gt;Networking and Security&lt;/strong&gt; select &lt;strong&gt;Elastic IPs&lt;/strong&gt;&lt;/li&gt;

&lt;li&gt;Click the &lt;strong&gt;Allocate New Address&lt;/strong&gt; button&lt;/li&gt;

&lt;li&gt;Ensure EC2 is selected and click &lt;strong&gt;Yes&lt;/strong&gt;&lt;/li&gt;

&lt;li&gt;Select the newly created IP and click on the &lt;strong&gt;Associate Address&lt;/strong&gt; button&lt;/li&gt;

&lt;li&gt;Select the EC2 instance&lt;/li&gt;

&lt;li&gt;Copy the IP Address (You&amp;#8217;ll need it later)&lt;/li&gt;
&lt;/ol&gt;

&lt;h2 id='connect_to_the_new_instance'&gt;Connect to the New Instance&lt;/h2&gt;

&lt;ol&gt;
&lt;li&gt;
&lt;p&gt;Connect with: &lt;code&gt;ssh -i ~/.ssh/keyname.pem ec2-user@[ip-add]&lt;/code&gt;&lt;/p&gt;
&lt;/li&gt;

&lt;li&gt;
&lt;p&gt;Allow other users on server (if applicable)&lt;/p&gt;

&lt;ul&gt;
&lt;li&gt;Open authorized_keys with: &lt;code&gt;sudo vim ~/.ssh/authorized_keys&lt;/code&gt;&lt;/li&gt;

&lt;li&gt;Copy and paste user hashes into keys file from another server&lt;/li&gt;
&lt;/ul&gt;
&lt;/li&gt;

&lt;li&gt;
&lt;p&gt;Install screen with: &lt;code&gt;sudo yum install screen&lt;/code&gt;&lt;/p&gt;
&lt;/li&gt;

&lt;li&gt;
&lt;p&gt;Install git with: &lt;code&gt;sudo yum install git&lt;/code&gt;&lt;/p&gt;
&lt;/li&gt;

&lt;li&gt;
&lt;p&gt;Install compiler software with: &lt;code&gt;sudo yum groupinstall &amp;quot;Development Tools&amp;quot;&lt;/code&gt;&lt;/p&gt;
&lt;/li&gt;

&lt;li&gt;
&lt;p&gt;Install ssl support for node with: &lt;code&gt;sudo yum install openssl-devel&lt;/code&gt;&lt;/p&gt;
&lt;/li&gt;

&lt;li&gt;
&lt;p&gt;Install Node&lt;/p&gt;

&lt;ul&gt;
&lt;li&gt;Create a directory for the node download file with: &lt;code&gt;sudo mkdir /downloads&lt;/code&gt;&lt;/li&gt;

&lt;li&gt;Go into newly created directory with: &lt;code&gt;cd /downloads&lt;/code&gt;&lt;/li&gt;

&lt;li&gt;Get the node repo with: &lt;code&gt;sudo git clone --depth 1 git://github.com/joyent/node.git&lt;/code&gt;&lt;/li&gt;

&lt;li&gt;Go into node directory with: &lt;code&gt;cd node&lt;/code&gt;&lt;/li&gt;

&lt;li&gt;Checkout a stable branch: &lt;code&gt;sudo git checkout v0.6.10&lt;/code&gt; (replace version with most recent stable version)&lt;/li&gt;

&lt;li&gt;Configure install with: &lt;code&gt;sudo ./configure --prefix=/opt/node&lt;/code&gt;&lt;/li&gt;

&lt;li&gt;Make j2 portion of install with: &lt;code&gt;sudo make -j2&lt;/code&gt;&lt;/li&gt;

&lt;li&gt;Finish installation with: &lt;code&gt;sudo make install&lt;/code&gt;&lt;/li&gt;

&lt;li&gt;Open .bash_profile with: &lt;code&gt;sudo vim ~/.bash_profile&lt;/code&gt;&lt;/li&gt;

&lt;li&gt;Add this line: &lt;code&gt;export PATH=$PATH:/opt/node/bin&lt;/code&gt;&lt;/li&gt;

&lt;li&gt;Reload the bash profile with: &lt;code&gt;source ~/.bash_profile&lt;/code&gt;&lt;/li&gt;

&lt;li&gt;Change permissions on node directory with: &lt;code&gt;sudo chown -R ec2-user:ec2-user /opt/node&lt;/code&gt;&lt;/li&gt;
&lt;/ul&gt;
&lt;/li&gt;

&lt;li&gt;
&lt;p&gt;Congrats! Node is installed! What&amp;#8217;s next? You can install mongodb or setup a git repo on the server to really get developing.&lt;/p&gt;
&lt;/li&gt;
&lt;/ol&gt;</content>
 </entry>
 
 <entry>
   <title>Git Branching</title>
   <link href="http://http://tinyfactory.github.com/git/2012/07/10/git-branching.html"/>
   <updated>2012-07-10T00:00:00-07:00</updated>
   <id>http://http://tinyfactory.github.com/git/2012/07/10/git-branching</id>
   <content type="html">&lt;p&gt;To create a new branch locally&lt;/p&gt;
&lt;div class='highlight'&gt;&lt;pre&gt;&lt;code class='bash'&gt;&lt;span class='nv'&gt;$ &lt;/span&gt;git checkout -b &lt;span class='s2'&gt;&amp;quot;new-branch-name&amp;quot;&lt;/span&gt;
Switched to a new branch &lt;span class='s2'&gt;&amp;quot;new-branch-name&amp;quot;&lt;/span&gt;
&lt;/code&gt;&lt;/pre&gt;
&lt;/div&gt;
&lt;p&gt;To create a new local branch from a remote branch&lt;/p&gt;
&lt;div class='highlight'&gt;&lt;pre&gt;&lt;code class='bash'&gt;&lt;span class='nv'&gt;$ &lt;/span&gt;git checkout -b new-branch-name origin/remote-branch-name
Switched to a new branch &lt;span class='s2'&gt;&amp;quot;new-branch-name&amp;quot;&lt;/span&gt;
&lt;/code&gt;&lt;/pre&gt;
&lt;/div&gt;
&lt;p&gt;Push a New Local Branch to a Remote Git Repo&lt;/p&gt;
&lt;div class='highlight'&gt;&lt;pre&gt;&lt;code class='bash'&gt;&lt;span class='nv'&gt;$ &lt;/span&gt;git push origin new-branch-name
&lt;/code&gt;&lt;/pre&gt;
&lt;/div&gt;
&lt;p&gt;To view your local branches&lt;/p&gt;
&lt;div class='highlight'&gt;&lt;pre&gt;&lt;code class='bash'&gt;&lt;span class='nv'&gt;$ &lt;/span&gt;git branch
&lt;/code&gt;&lt;/pre&gt;
&lt;/div&gt;
&lt;p&gt;To view all branches (local and remote)&lt;/p&gt;
&lt;div class='highlight'&gt;&lt;pre&gt;&lt;code class='bash'&gt;&lt;span class='nv'&gt;$ &lt;/span&gt;git branch -a
&lt;/code&gt;&lt;/pre&gt;
&lt;/div&gt;
&lt;p&gt;To view all remote branches&lt;/p&gt;
&lt;div class='highlight'&gt;&lt;pre&gt;&lt;code class='bash'&gt;&lt;span class='nv'&gt;$ &lt;/span&gt;git branch -r
&lt;/code&gt;&lt;/pre&gt;
&lt;/div&gt;
&lt;p&gt;To merge a branch check out the branch you&amp;#8217;d like to merge to and run&lt;/p&gt;
&lt;div class='highlight'&gt;&lt;pre&gt;&lt;code class='bash'&gt;&lt;span class='nv'&gt;$ &lt;/span&gt;git checkout master
&lt;span class='nv'&gt;$ &lt;/span&gt;git merge new-branch-name
&lt;/code&gt;&lt;/pre&gt;
&lt;/div&gt;
&lt;p&gt;To push all local changes to remote&lt;/p&gt;
&lt;div class='highlight'&gt;&lt;pre&gt;&lt;code class='bash'&gt;&lt;span class='nv'&gt;$ &lt;/span&gt;git push origin
&lt;/code&gt;&lt;/pre&gt;
&lt;/div&gt;
&lt;p&gt;To push local changes for a specific repo&lt;/p&gt;
&lt;div class='highlight'&gt;&lt;pre&gt;&lt;code class='bash'&gt;&lt;span class='nv'&gt;$ &lt;/span&gt;git push origin master
&lt;/code&gt;&lt;/pre&gt;
&lt;/div&gt;
&lt;p&gt;View GUI of merges&lt;/p&gt;
&lt;div class='highlight'&gt;&lt;pre&gt;&lt;code class='bash'&gt;&lt;span class='nv'&gt;$ &lt;/span&gt;gitk
&lt;/code&gt;&lt;/pre&gt;
&lt;/div&gt;</content>
 </entry>
 
 <entry>
   <title>Changing the head on a Git Repo</title>
   <link href="http://http://tinyfactory.github.com/git/2012/07/09/changing-the-head-pointer-on-a-git-repoistory.html"/>
   <updated>2012-07-09T00:00:00-07:00</updated>
   <id>http://http://tinyfactory.github.com/git/2012/07/09/changing-the-head-pointer-on-a-git-repoistory</id>
   <content type="html">&lt;p&gt;If you want the default branch from a &lt;code&gt;git clone&lt;/code&gt; to be something besides &lt;code&gt;master&lt;/code&gt;, use the following steps:&lt;/p&gt;

&lt;p&gt;Check what remote branches are available:&lt;/p&gt;
&lt;div class='highlight'&gt;&lt;pre&gt;&lt;code class='bash'&gt;git branch -r
&lt;/code&gt;&lt;/pre&gt;
&lt;/div&gt;
&lt;p&gt;The output will look like:&lt;/p&gt;
&lt;div class='highlight'&gt;&lt;pre&gt;&lt;code class='bash'&gt;origin/HEAD -&amp;gt; origin/master
origin/dev
origin/master
&lt;/code&gt;&lt;/pre&gt;
&lt;/div&gt;
&lt;p&gt;Notice &lt;code&gt;origin/HEAD -&amp;gt; orgin/master&lt;/code&gt;. When you issue a &lt;code&gt;git clone&lt;/code&gt; on this repository you will get the master branch by default. If want to change this to the dev branch we also have in our remote repository, issue the following command&lt;/p&gt;
&lt;div class='highlight'&gt;&lt;pre&gt;&lt;code class='bash'&gt;git remote &lt;span class='nb'&gt;set&lt;/span&gt;-head origin dev
&lt;/code&gt;&lt;/pre&gt;
&lt;/div&gt;
&lt;p&gt;To confirm the change took, run &lt;code&gt;git branch -r&lt;/code&gt; and review our output:&lt;/p&gt;
&lt;div class='highlight'&gt;&lt;pre&gt;&lt;code class='bash'&gt;origin/HEAD -&amp;gt; origin/dev
origin/dev
origin/master
&lt;/code&gt;&lt;/pre&gt;
&lt;/div&gt;
&lt;p&gt;&lt;code&gt;origin/HEAD -&amp;gt; orgin/dev&lt;/code&gt; is pointing to our dev branch.&lt;/p&gt;

&lt;h3 id='how_does_it_work'&gt;How does it work?&lt;/h3&gt;</content>
 </entry>
 
 <entry>
   <title>Setup Ftp On Aws Centos</title>
   <link href="http://http://tinyfactory.github.com/centos/2012/07/08/setup-ftp-on-aws-centos.html"/>
   <updated>2012-07-08T00:00:00-07:00</updated>
   <id>http://http://tinyfactory.github.com/centos/2012/07/08/setup-ftp-on-aws-centos</id>
   <content type="html">&lt;ol&gt;
&lt;li&gt;
&lt;p&gt;Install &lt;strong&gt;vsftpd&lt;/strong&gt;&lt;/p&gt;
&lt;div class='highlight'&gt;&lt;pre&gt;&lt;code class='bash'&gt;yum install vsftpd - y

&lt;/code&gt;&lt;/pre&gt;
&lt;/div&gt;&lt;/li&gt;

&lt;li&gt;
&lt;p&gt;Open up the config file&lt;/p&gt;
&lt;div class='highlight'&gt;&lt;pre&gt;&lt;code class='bash'&gt;vim /etc/vsftpd/vsftpd.conf

&lt;/code&gt;&lt;/pre&gt;
&lt;/div&gt;&lt;/li&gt;

&lt;li&gt;
&lt;p&gt;Add the following lines to the end of &lt;strong&gt;vsftpd.conf&lt;/strong&gt;&lt;/p&gt;
&lt;div class='highlight'&gt;&lt;pre&gt;&lt;code class='bash'&gt;&lt;span class='nv'&gt;pasv_enable&lt;/span&gt;&lt;span class='o'&gt;=&lt;/span&gt;YES
&lt;span class='nv'&gt;pasv_min_port&lt;/span&gt;&lt;span class='o'&gt;=&lt;/span&gt;1400 ← port range to be opened at the security group
&lt;span class='nv'&gt;pasv_max_port&lt;/span&gt;&lt;span class='o'&gt;=&lt;/span&gt;1500
&lt;span class='nv'&gt;pasv_address&lt;/span&gt;&lt;span class='o'&gt;=&lt;/span&gt;23.21.148.84 ← server IP

&lt;/code&gt;&lt;/pre&gt;
&lt;/div&gt;&lt;/li&gt;

&lt;li&gt;
&lt;p&gt;Open up the following &lt;strong&gt;ports&lt;/strong&gt; at the security group within &lt;strong&gt;AWS&lt;/strong&gt;&lt;/p&gt;
&lt;div class='highlight'&gt;&lt;pre&gt;&lt;code class='bash'&gt;21 ← default FTP connection port
1400-1500 ← passive port range &lt;span class='nb'&gt;set &lt;/span&gt;in vsftpd.con

&lt;/code&gt;&lt;/pre&gt;
&lt;/div&gt;&lt;/li&gt;

&lt;li&gt;
&lt;p&gt;Restart the &lt;strong&gt;vsftpd&lt;/strong&gt; server&lt;/p&gt;
&lt;div class='highlight'&gt;&lt;pre&gt;&lt;code class='bash'&gt;sudo service vsftpd restart

&lt;/code&gt;&lt;/pre&gt;
&lt;/div&gt;&lt;/li&gt;

&lt;li&gt;
&lt;p&gt;Add new user to server for login&lt;/p&gt;
&lt;div class='highlight'&gt;&lt;pre&gt;&lt;code class='bash'&gt;sudo adduser &lt;span class='o'&gt;[&lt;/span&gt;username&lt;span class='o'&gt;]&lt;/span&gt;

&lt;/code&gt;&lt;/pre&gt;
&lt;/div&gt;&lt;/li&gt;

&lt;li&gt;
&lt;p&gt;Give user a password so they can login&lt;/p&gt;
&lt;div class='highlight'&gt;&lt;pre&gt;&lt;code class='bash'&gt;sudo passwd &lt;span class='o'&gt;[&lt;/span&gt;username&lt;span class='o'&gt;]&lt;/span&gt;

&lt;/code&gt;&lt;/pre&gt;
&lt;/div&gt;&lt;/li&gt;

&lt;li&gt;
&lt;p&gt;Add entry to auto start &lt;strong&gt;vsftpd&lt;/strong&gt; on server restart&lt;/p&gt;
&lt;div class='highlight'&gt;&lt;pre&gt;&lt;code class='bash'&gt;sudo chkconfig vsftpd on 

&lt;/code&gt;&lt;/pre&gt;
&lt;/div&gt;&lt;/li&gt;

&lt;li&gt;
&lt;p&gt;Bonus - if you want to have a user’s files uploaded to an EBS mount, symlink from the FTP user’s directory to the EBS mount&lt;/p&gt;
&lt;div class='highlight'&gt;&lt;pre&gt;&lt;code class='bash'&gt;ln -s &lt;span class='o'&gt;[&lt;/span&gt;&lt;span class='nb'&gt;source&lt;/span&gt;-file/folder&lt;span class='o'&gt;]&lt;/span&gt; &lt;span class='o'&gt;[&lt;/span&gt;link-name&lt;span class='o'&gt;]&lt;/span&gt;

&lt;/code&gt;&lt;/pre&gt;
&lt;/div&gt;&lt;/li&gt;
&lt;/ol&gt;</content>
 </entry>
 

</feed>
